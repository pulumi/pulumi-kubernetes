// Copyright 2016-2021, Pulumi Corporation.
//
// Licensed under the Apache License, Version 2.0 (the "License");
// you may not use this file except in compliance with the License.
// You may obtain a copy of the License at
//
//     http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.

// *** WARNING: this file was generated by pulumigen. ***
// *** Do not edit by hand unless you're certain you know what you are doing! ***

package kinds

import (
	"strings"

	"github.com/pulumi/pulumi/pkg/v3/codegen"
	"k8s.io/apimachinery/pkg/runtime/schema"
)

// Kind maps to the name of a Kubernetes resource Kind.
type Kind string

const (
{{- range .Kinds}}
	{{.}} Kind = "{{.}}"
{{- end}}
)

// Namespaced returns whether known resource Kinds are namespaced. If the Kind is unknown (such as CRD Kinds), the
// known return value will be false, and the namespaced value is unknown. In this case, this information can be
// queried separately from the k8s API server.
func (k Kind) Namespaced() (known bool, namespaced bool) {
	baseKind := Kind(strings.TrimSuffix(string(k), "List"))

	switch baseKind {
	// Note: Use `kubectl api-resources --namespaced=true -o name` to retrieve a list of namespace-scoped resources.
	//       Ignoring the same imperative endpoints as in `pkg/gen/typegen.go:isTopLevel`
	case Binding,
		ConfigMap,
		ControllerRevision,
		CronJob,
		CSIStorageCapacity,
		DaemonSet,
		Deployment,
		Endpoints,
		EndpointSlice,
		Event,
		HorizontalPodAutoscaler,
		Ingress,
		Job,
		Lease,
		LimitRange,
		NetworkPolicy,
		PersistentVolumeClaim,
		Pod,
		PodDisruptionBudget,
		PodTemplate,
		ReplicaSet,
		ReplicationController,
		ResourceQuota,
		Role,
		RoleBinding,
		Secret,
		Service,
		ServiceAccount,
		StatefulSet:
		return true, true
	// Note: Use `kubectl api-resources --namespaced=false -o name` to retrieve a list of cluster-scoped resources.
	//       Ignoring the same imperative endpoints as in `pkg/gen/typegen.go:isTopLevel`
	case APIService,
		CertificateSigningRequest,
		ClusterRole,
		ClusterRoleBinding,
		CSIDriver,
		CSINode,
		CustomResourceDefinition,
		FlowSchema,
		IngressClass,
		MutatingWebhookConfiguration,
		Namespace,
		Node,
		PersistentVolume,
		PodSecurityPolicy,
		PriorityClass,
		PriorityLevelConfiguration,
		RuntimeClass,
		StorageClass,
		ValidatingWebhookConfiguration,
		VolumeAttachment:
		return true, false
	default:
		return false, false
	}
}

// groupVersion maps to the name of a Kubernetes resource GroupVersion.
type groupVersion string

const (
{{- range .GroupVersions}}
	{{.GVConstName}} groupVersion = "{{.}}"
{{- end}}
)

// toGVK is a helper function that converts the internal groupVersion and Kind types to a schema.GroupVersionKind
func toGVK(gv groupVersion, kind Kind) schema.GroupVersionKind {
	parts := strings.Split(string(gv), "/")
	g, v := parts[0], parts[1]

	return schema.GroupVersionKind{
		Group:   g,
		Version: v,
		Kind:    string(kind),
	}
}

// KnownGroupVersions is the set of built-in GroupVersions / ApiVersions. GVs defined by a CRD are not part of this set.
var KnownGroupVersions = codegen.NewStringSet(
{{- range .GroupVersions}}
	"{{.}}",
{{- end}}
    "v1", // alias for "core/v1"
)

// ListQualifiedTypes is the set of "List" resource QualifiedType URN tokens. Checking against this known set rather
// than using the List suffix avoids unintended clashes with CustomResources that also contain a List suffix.
var ListQualifiedTypes = codegen.NewStringSet(
{{- range .ListKinds}}
	"{{.}}",
{{- end}}
)
